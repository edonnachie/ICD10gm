<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ICD10gm">
<title>Introduction to the ICD10gm Package • ICD10gm</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to the ICD10gm Package">
<meta property="og:description" content="ICD10gm">
<meta property="og:image" content="https://edonnachie.github.io/ICD10gm/logo.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@ERDonnachie">
<meta name="twitter:site" content="@ERDonnachie">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ICD10gm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/icd10gm_intro.html">Introduction to the ICD10gm Package</a>
    <a class="dropdown-item" href="../articles/coding_covid-19.html">Coding the Covid-19 Pandemic in Germany</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/edonnachie/ICD10gm/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to the ICD10gm Package</h1>
            <h3 data-toc-skip class="subtitle">Motivation, Basic Usage
and Examples</h3>
                        <h4 data-toc-skip class="author">Ewan
Donnachie</h4>
            
            <h4 data-toc-skip class="date">2023-02-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/edonnachie/ICD10gm/blob/HEAD/vignettes/icd10gm_intro.Rmd" class="external-link"><code>vignettes/icd10gm_intro.Rmd</code></a></small>
      <div class="d-none name"><code>icd10gm_intro.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>ICD10gm is an R Package for working with the German Modification of
the International Statistical Classification of Diseases and Related
Health Problems (ICD-10-GM).</p>
<p>The ICD-10 classification is an international standard for the coding
of health service data. It is used widely both to document morbidity in
healthcare systems, usually in the context of remuneration claims, and
to encode <a href="https://www.who.int/data/gho/data/themes/mortality-and-global-health-estimates" class="external-link">mortality
statistics</a>. In Germany, the <a href="https://www.dimdi.de" class="external-link">German
Instutite of Medical Documentation and Information (DIMDI)</a> releases
a German Modification (ICD-10-GM) of the classification that forms a
compulsory part of all remuneration claims in the ambulatory and
hospital sectors. Further information and historical context can be
found in, for example, <a href="https://doi.org/10.1007/s00103-007-0283-x" class="external-link">Graubner (2007)</a> or
<a href="https://www.jstor.org/stable/25767019" class="external-link">Jetté <em>et al</em>
(2010)</a>.</p>
<div class="section level3">
<h3 id="aims">Aims<a class="anchor" aria-label="anchor" href="#aims"></a>
</h3>
<p>This package was created to facilitate the analysis of data coded
using the ICD-10-GM. In particular, it has the following aims:</p>
<ol style="list-style-type: decimal">
<li>Provide convenient access to the extended ICD-10-GM metadata</li>
<li>Identify and extract ICD-10 codes from character strings</li>
<li>Facilitate the specification of ICD codes for analysis, utilising
the ICD hierarchy (e.g. given the specification “A0” return all subcodes
in the range “A01” to “A09”)</li>
<li>Enable the historization of ICD specifications when analysing
longitudinal claims data, applying the automatic code transitions
provided by DIMDI, identifying potentially problematic codes and
enabling the specification of custom transitions</li>
</ol>
<p>ICD10gm is designed for use in the context of medical and health
services research using routinely collected claims data. It is not
suitable for use in operative coding as it does not include all relevant
metadata (e.g. inclusion and exclusion notes and the detailed
definitions of psychiatric diagnoses). The metadata provided in the
ICD10gm package is not intended to replace the <a href="https://www.dimdi.de/dynamic/de/klassifikationen/icd/icd-10-gm/" class="external-link">official
DIMDI documentation</a>, which should always be consulted when
specifying ICD codes for analysis.</p>
<p>The following presents an overview of the basic functionality
provided by the ICD10gm package, illustrated by means of simple
examples. To access this vignette in R, type:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"icd10gm_intro"</span>, package <span class="op">=</span> <span class="st">"ICD10gm"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="basic-use">Basic Use<a class="anchor" aria-label="anchor" href="#basic-use"></a>
</h2>
<div class="section level3">
<h3 id="access-icd-10-gm-metadata">Access ICD-10-GM metadata<a class="anchor" aria-label="anchor" href="#access-icd-10-gm-metadata"></a>
</h3>
<p>The ICD-10-GM metadata are provided by four data.frames that form the
core of the ICD10gm package:</p>
<ul>
<li>
<code>icd_meta_chapters</code>: Specification of the ICD-10-GM
chapters with label and number (Arabic and Roman numerals)</li>
<li>
<code>icd_meta_blocks</code>: Specification of the ICD-10 blocks,
each containing a sequence of related ICD-10 codes</li>
<li>
<code>icd_meta_codes</code>: Extended metadata for all ICD-10-GM
codes</li>
<li>
<code>icd_meta_transitions</code>: The “crosswalk” table specifying
old and new ICD-10-GM codes for successive annual versions.</li>
</ul>
<p>Documentation for the individual datasets can be accessed using the R
help system by typing, for example, either
<code><a href="../reference/icd_meta_codes.html">help("icd_meta_codes", package = "ICD10gm")</a></code> or simply
<code><a href="../reference/icd_meta_codes.html">?icd_meta_codes</a></code>.</p>
<p>While column names have been translated into English, the ICD-10-GM
labels are in German with UTF-8 character encoding throughout.</p>
<p>In addition to this tabular data, several utility functions are
provided to perform common queries on the metadata.</p>
<ul>
<li>
<strong>Interactive code lookup:</strong> <code>icd_lookup</code>
(lookup ICD-10 code in console), <code>icd_browse</code> (lookup
ICD-10-GM in the official Online documentation) and
<code>icd_search</code> (search through the ICD-10-GM labels).</li>
<li>
<strong>Manual code history validation:</strong>
<code>icd_showchanges</code> and <code>icd_showchanges_icd3</code> query
<code>icd_meta_transitions</code> and return entries that are affected
by changes in the ICD-10-GM versions.</li>
</ul>
<div class="section level4">
<h4 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h4>
<p>First, we load the ICD10gm package alongside some <a href="https://www.tidyverse.org" class="external-link">tidyverse packages</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://edonnachie.github.io/ICD10gm/">ICD10gm</a></span><span class="op">)</span></span></code></pre></div>
<p>By way of example, we examine the coding of unspecific
gastroenteritis (i.e. without identification of a specific cause), a
very common diagnosis in primary care. We can look up the appropriate
code as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/icd_search.html">icd_search</a></span><span class="op">(</span><span class="st">"gastroenteritis"</span>, level <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;        year icd3 icd_sub</span></span>
<span><span class="co">#&gt; 299205 2023  A09     A09</span></span>
<span><span class="co">#&gt; 304723 2023  K52     K52</span></span>
<span><span class="co">#&gt;                                                                                                                      label</span></span>
<span><span class="co">#&gt; 299205 Sonstige und nicht näher bezeichnete Gastroenteritis und Kolitis infektiösen und nicht näher bezeichneten Ursprungs</span></span>
<span><span class="co">#&gt; 304723                                                                Sonstige nichtinfektiöse Gastroenteritis und Kolitis</span></span></code></pre></div>
<p>We see that A09 is used for infectious gastroenteritis, whereas K52
corresponds to non-infectious gastroenteritis. We are interested in A09,
but might wish to read up on the details in the official
documentation:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/icd_browse.html">icd_browse</a></span><span class="op">(</span><span class="st">"A09"</span><span class="op">)</span></span></code></pre></div>
<p>This will open the documentation in our system’s default browser.</p>
<p>Now, we check whether whether this code has been affected by code
transitions in any revision since 2003:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/icd_showchanges_icd3.html">icd_showchanges_icd3</a></span><span class="op">(</span><span class="st">"A09"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="8%">
<col width="6%">
<col width="7%">
<col width="5%">
<col width="14%">
<col width="15%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="5%">
<col width="4%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="right">year_from</th>
<th align="right">year_to</th>
<th align="left">icd_from</th>
<th align="left">icd_to</th>
<th align="left">automatic_forward</th>
<th align="left">automatic_backward</th>
<th align="left">change_5</th>
<th align="left">change_4</th>
<th align="left">change_3</th>
<th align="left">change</th>
<th align="left">icd3</th>
<th align="left">icd_kapitel</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2009</td>
<td align="right">2010</td>
<td align="left">A09</td>
<td align="left">A09.0</td>
<td align="left"></td>
<td align="left">A</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">A09</td>
<td align="left">A</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="right">2010</td>
<td align="left">A09</td>
<td align="left">A09.9</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">A09</td>
<td align="left">A</td>
</tr>
<tr class="odd">
<td align="right">2009</td>
<td align="right">2010</td>
<td align="left">K52.9</td>
<td align="left">A09.9</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
<td align="left">A09</td>
<td align="left">A</td>
</tr>
</tbody>
</table>
<p>Diagnoses that, prior to 2009, were coded as K52.9 are now coded as
A09.9. We can investigate exactly what changed by looking the relevant
codes for the years 2009 and 2010:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_icd_labels.html">get_icd_labels</a></span><span class="op">(</span>icd3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A09"</span>, <span class="st">"K52"</span><span class="op">)</span>, year <span class="op">=</span> <span class="fl">2009</span><span class="op">:</span><span class="fl">2010</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">icd_sub</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">icd_sub</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"K529"</span><span class="op">)</span> <span class="op">|</span> <span class="va">icd3</span> <span class="op">==</span> <span class="st">"A09"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">icd_normcode</span>, <span class="va">label</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="3%">
<col width="9%">
<col width="86%">
</colgroup>
<thead><tr class="header">
<th align="right">year</th>
<th align="left">icd_normcode</th>
<th align="left">label</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2009</td>
<td align="left">A09</td>
<td align="left">Diarrhoe und Gastroenteritis, vermutlich infektiösen
Ursprungs</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">K52.9</td>
<td align="left">Nichtinfektiöse Gastroenteritis und Kolitis, nicht
näher bezeichnet</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="left">A09</td>
<td align="left">Sonstige und nicht näher bezeichnete Gastroenteritis
und Kolitis infektiösen und nicht näher bezeichneten Ursprungs</td>
</tr>
<tr class="even">
<td align="right">2010</td>
<td align="left">A09.0</td>
<td align="left">Sonstige und nicht näher bezeichnete Gastroenteritis
und Kolitis infektiösen Ursprungs</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="left">A09.9</td>
<td align="left">Sonstige und nicht näher bezeichnete Gastroenteritis
und Kolitis nicht näher bezeichneten Ursprungs</td>
</tr>
<tr class="even">
<td align="right">2010</td>
<td align="left">K52.9</td>
<td align="left">Nichtinfektiöse Gastroenteritis und Kolitis, nicht
näher bezeichnet</td>
</tr>
</tbody>
</table>
<p>Prior to 2010, A09 had been reserved for gastroenteritis of presumed
infectious origin (German: <em>vermutlich infektiösen Ursprungs</em>),
with unspecified gastroenteritis coded by K52.9. Since 2010, A09.9 codes
any unspecified gastroenteritis, with K52.9 reserved for cases
determined to be non-infectious. The effect of this change is that A09.9
has replaced K52.9 as the unspecific code used to document the vast
majority of routine cases in primary care. Failure to account for this
would constitute a major error in medical or epidemiological
research.</p>
</div>
</div>
<div class="section level3">
<h3 id="test-whether-a-string-represents-an-icd-10-gm-code">Test whether a string represents an ICD-10-GM code<a class="anchor" aria-label="anchor" href="#test-whether-a-string-represents-an-icd-10-gm-code"></a>
</h3>
<p>The function <code>is_icd_code</code> tests whether a character
vector represents a valid ICD-10-GM code (i.e. a code listed in the
data.frame <code>icd_meta_codes</code>, allowing for alternative code
specifications). The test may be limited to a particular version of the
ICD-10-GM by specifying the <code>year</code> argument.</p>
<div class="section level4">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h4>
<p>The function <code>is_icd_code</code> recognises ICD codes regardless
of their formatting, returning <code>TRUE</code> if the string is
recognised as an ICD code and <code>FALSE</code> otherwise:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/is_icd_code.html">is_icd_code</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"E10.1"</span>, <span class="st">"E101"</span>, <span class="st">"E10.1-"</span>, <span class="st">"J44"</span>, <span class="st">"This is not an ICD code"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE  TRUE  TRUE  TRUE FALSE</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="extracting-icd-codes-from-a-string">Extracting ICD codes from a string<a class="anchor" aria-label="anchor" href="#extracting-icd-codes-from-a-string"></a>
</h3>
<p>The function <code>icd_parse</code> extracts all ICD-10 codes from an
arbitrary character vector. On the one hand, this may be used as in the
<code>icd_expand</code> function to convert ICD-10 codes to a
standardised format or extract parts of the code. On the other hand, it
may be used to extract potentially many ICD-10 codes from any document
that can be converted to text format (perhaps using the <a href="https://CRAN.R-project.org/package=pdftools" class="external-link"><code>pdftools</code>
package</a> to scrape a PDF document or <a href="https://CRAN.R-project.org/package=rvest" class="external-link"><code>rvest</code></a>
to scrape a website).</p>
<div class="section level4">
<h4 id="example-scraping-codes-from-a-website">Example: Scraping codes from a website<a class="anchor" aria-label="anchor" href="#example-scraping-codes-from-a-website"></a>
</h4>
<p>As an example of how ICD10gm can be used to extract ICD codes from
arbitrary text, the following code uses the rvest package to scrape the
code block “A00-A09” from the online version of the DIMDI ICD-10-GM
reference. We apply the filter to exclude codes below A10, thus
revealing which other ICD-10 codes are reference from this block. To
simply the package building process, the code has not been evaluated.
This is left as an exercise to the reader.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/" class="external-link">rvest</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html" class="external-link">read_html</a></span><span class="op">(</span><span class="st">"https://www.dimdi.de/static/de/klassifikationen/icd/icd-10-gm/kode-suche/htmlgm2018/block-a00-a09.htm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_text.html" class="external-link">html_text</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/icd_parse.html">icd_parse</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"bounded"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">icd_spec</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">icd_sub</span> <span class="op">&gt;=</span> <span class="st">"A10"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">icd_sub</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/get_icd_labels.html">get_icd_labels</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2018</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"icd_sub"</span>, <span class="st">"icd_normcode"</span>, <span class="st">"label"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"icd_sub"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">icd_normcode</span>, <span class="va">label</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>row.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>               caption <span class="op">=</span> <span class="st">"Additional ICD-10 codes referred to in block A00-A09 (Intestional infectious diseases) of the ICD-10-GM (2018)."</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="expand-a-icd-specification-down-the-hierarchy">Expand a ICD specification down the hierarchy<a class="anchor" aria-label="anchor" href="#expand-a-icd-specification-down-the-hierarchy"></a>
</h3>
<p>The function <code>icd_expand</code> takes a data.frame containing
ICD codes and optional metadata as input. It returns a data.frame
containing all ICD codes at or below the specified level of the
hierarchy (e.g. the specification “E11” is expanded to include all
three, four and five-digit codes beginning with E11). Expansion is done
within a specified version of the ICD-10-GM (e.g. year 2018).</p>
<div class="section level4">
<h4 id="example-1">Example<a class="anchor" aria-label="anchor" href="#example-1"></a>
</h4>
<p>Irritable bowel syndrome is coded using either the three-digit code
K58 (conceiving IBS as the somatic condition) or the code F45.32
(focussing on IBS as a psychosomatic condition). We can retrieve all
subcodes in the year 2019 as follows:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">icd_k58</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>DIAG_GROUP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"IBS"</span>, <span class="st">"IBS"</span><span class="op">)</span>, ICD_SPEC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"K58"</span>, <span class="st">"F45.32"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/icd_expand.html">icd_expand</a></span><span class="op">(</span>col_icd <span class="op">=</span> <span class="st">"ICD_SPEC"</span>, year <span class="op">=</span> <span class="fl">2019</span>, col_meta <span class="op">=</span> <span class="st">"DIAG_GROUP"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">icd_k58</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="8%">
<col width="3%">
<col width="3%">
<col width="6%">
<col width="9%">
<col width="6%">
<col width="54%">
</colgroup>
<thead><tr class="header">
<th align="left">icd_spec</th>
<th align="left">DIAG_GROUP</th>
<th align="right">year</th>
<th align="left">icd3</th>
<th align="left">icd_code</th>
<th align="left">icd_normcode</th>
<th align="left">icd_sub</th>
<th align="left">label</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">K58</td>
<td align="left">IBS</td>
<td align="right">2019</td>
<td align="left">K58</td>
<td align="left">K58.-</td>
<td align="left">K58</td>
<td align="left">K58</td>
<td align="left">Reizdarmsyndrom</td>
</tr>
<tr class="even">
<td align="left">K58</td>
<td align="left">IBS</td>
<td align="right">2019</td>
<td align="left">K58</td>
<td align="left">K58.1</td>
<td align="left">K58.1</td>
<td align="left">K581</td>
<td align="left">Reizdarmsyndrom, Diarrhoe-prädominant [RDS-D]</td>
</tr>
<tr class="odd">
<td align="left">K58</td>
<td align="left">IBS</td>
<td align="right">2019</td>
<td align="left">K58</td>
<td align="left">K58.2</td>
<td align="left">K58.2</td>
<td align="left">K582</td>
<td align="left">Reizdarmsyndrom, Obstipations-prädominant [RDS-O]</td>
</tr>
<tr class="even">
<td align="left">K58</td>
<td align="left">IBS</td>
<td align="right">2019</td>
<td align="left">K58</td>
<td align="left">K58.3</td>
<td align="left">K58.3</td>
<td align="left">K583</td>
<td align="left">Reizdarmsyndrom mit wechselnden (gemischten)
Stuhlgewohnheiten [RDS-M]</td>
</tr>
<tr class="odd">
<td align="left">K58</td>
<td align="left">IBS</td>
<td align="right">2019</td>
<td align="left">K58</td>
<td align="left">K58.8</td>
<td align="left">K58.8</td>
<td align="left">K588</td>
<td align="left">Sonstiges und nicht näher bezeichnetes
Reizdarmsyndrom</td>
</tr>
<tr class="even">
<td align="left">F4532</td>
<td align="left">IBS</td>
<td align="right">2019</td>
<td align="left">F45</td>
<td align="left">F45.32</td>
<td align="left">F45.32</td>
<td align="left">F4532</td>
<td align="left">Somatoforme autonome Funktionsstörung: Unteres
Verdauungssystem</td>
</tr>
</tbody>
</table>
<p>Note that the <code>data.frame</code> containing the specification
should normally be stored as a separate metadata file (eg. csv or Excel
format) to facilitate maintenance and sharing of the specification. The
column <code>DIAG_GROUP</code> is a label that can be allocated to one
or multiple rows of the specification and is useful when aggregating
diagnoses. This is similar to the concept of diagnosis groupers used,
for example, in risk adjustment schemes (e.g. as operated by the <a href="https://www.bundesamtsozialesicherung.de/de/themen/risikostrukturausgleich/ueberblick/" class="external-link">German
Federal Social Insurance Office</a>). In this case, we may want to treat
the two alternative codes as equivalent by allocating the label “IBS” to
both. In this way, we overcome the common problem that, in practice,
multiple codes are used to document the same underlying disease.</p>
</div>
</div>
<div class="section level3">
<h3 id="historise-an-icd-specification">Historise an ICD specification<a class="anchor" aria-label="anchor" href="#historise-an-icd-specification"></a>
</h3>
<p>The function <code>icd_history</code> takes the result of
<code>icd_expand</code>, specified for a particular year, and returns a
data.frame containing all corresponding codes for the specified years
(from 2003). To do this, it applies the ICD-10-GM transition tables to
map codes between successive ICD-10-GM versions. Only automatic
transitions are followed to ensure that the specification retains its
meaning. Custom transitions, tailored to the needs of the project at
hand, can be specified to yield a more complete history.</p>
</div>
<div class="section level3">
<h3 id="example-2">Example<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h3>
<p>We historise the code K58, specified for the year 2019, backwards to
obtain the corresponding codes for the years 2017 to 2019:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/icd_history.html">icd_history</a></span><span class="op">(</span><span class="va">icd_k58</span>, years <span class="op">=</span> <span class="fl">2017</span><span class="op">:</span><span class="fl">2019</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">icd_spec</span>, <span class="va">DIAG_GROUP</span>, <span class="va">year</span>, <span class="va">icd_code</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">icd_code</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 4</span></span></span>
<span><span class="co">#&gt;    icd_spec DIAG_GROUP  year icd_code</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> F4532    IBS         <span style="text-decoration: underline;">2</span>017 F45.32  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> K58      IBS         <span style="text-decoration: underline;">2</span>017 K58.0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> K58      IBS         <span style="text-decoration: underline;">2</span>017 K58.9   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> F4532    IBS         <span style="text-decoration: underline;">2</span>018 F45.32  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> K58      IBS         <span style="text-decoration: underline;">2</span>018 K58.0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> K58      IBS         <span style="text-decoration: underline;">2</span>018 K58.9   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> F4532    IBS         <span style="text-decoration: underline;">2</span>019 F45.32  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> K58      IBS         <span style="text-decoration: underline;">2</span>019 K58.-   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> K58      IBS         <span style="text-decoration: underline;">2</span>019 K58.1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> K58      IBS         <span style="text-decoration: underline;">2</span>019 K58.2   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> K58      IBS         <span style="text-decoration: underline;">2</span>019 K58.3   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> K58      IBS         <span style="text-decoration: underline;">2</span>019 K58.8</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="copyright">Copyright<a class="anchor" aria-label="anchor" href="#copyright"></a>
</h2>
<p>Program code is released under the <a href="https://edonnachie.github.io/ICD10gm/LICENSE-text.html">MIT
license</a>.</p>
<p>The underlying ICD-10-GM metadata is copyright of the <a href="https://www.dimdi.de" class="external-link">German Instutite of Medical Documentation
and Information (DIMDI)</a>. The source files are available free of
charge from the <a href="https://www.dimdi.de/dynamic/de/klassifikationen/downloads/?dir=icd-10-gm" class="external-link">DIMDI
Download Centre</a>. I believe that their use in this package is
compatible with the copyright restrictions. In particular:</p>
<ul>
<li><p>The distribution of an “added-value product” derived from the
original DIMDI classification files is expressly permitted.</p></li>
<li><p>Distribution of the original classification files is forbidden.
Consequently, this package distributes only the code required to process
these files. Those wishing to compile the data from scratch must
download the files from the DIMDI download centre and agree to the
copyright restrictions.</p></li>
<li><p>The package does not modify the ICD-10-GM codes, texts or other
metadata in any way other than to restructure the data into a convenient
form.</p></li>
<li><p>The package does not contain any commercial advertising.</p></li>
<li><p>The source of the data is clearly stated, both here and in the
main package documentation.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>The ICD10gm package provides a convenient means of accessing and
manipulating the German modification of the ICD-10 classification. It is
designed for use in medical, epidemiological and health services
research.</p>
<p>To the author’s knowledge, this package represents the only publicly
available repository of pre-processed metadata for the ICD-10-GM.
Indeed, a key contribution of the package is the compilation and
processing of the metadata provided by DIMDI, which is designed more for
the needs of operational use than for the purpose of longitudinal
secondary data analysis.</p>
<p>Building on the metadata, the ICD10gm package provides various
functions to facilitate the analysis of ICD-10 data. Possible uses
include:</p>
<ul>
<li><p>Calculating the administrative prevalence of diseases over time,
accounting for changes to the ICD-10-GM classification.</p></li>
<li><p>The extraction of ICD-10 codes for the purposes of text
mining.</p></li>
<li><p>The implementation of diagnoses grouping systems for the
representation of patient morbidity.</p></li>
</ul>
<div class="section level3">
<h3 id="related-packages">Related Packages<a class="anchor" aria-label="anchor" href="#related-packages"></a>
</h3>
<p>The <a href="https://CRAN.R-project.org/package=icd" class="external-link">icd package</a>
has similar aims but has a slightly different approach and focusses on
the US version of the ICD-10 system.</p>
</div>
<div class="section level3">
<h3 id="cite">Cite<a class="anchor" aria-label="anchor" href="#cite"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"ICD10gm"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; To cite package 'ICD10gm' in publications use:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Donnachie E (2023). _ICD10gm: Metadata Processing for the German</span></span>
<span><span class="co">#&gt;   Modification of the ICD-10 Coding System_.</span></span>
<span><span class="co">#&gt;   https://edonnachie.github.io/ICD10gm/,</span></span>
<span><span class="co">#&gt;   https://doi.org/10.5281/zenodo.2542833.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   @Manual{,</span></span>
<span><span class="co">#&gt;     title = {ICD10gm: Metadata Processing for the German Modification of the ICD-10 Coding System},</span></span>
<span><span class="co">#&gt;     author = {Ewan Donnachie},</span></span>
<span><span class="co">#&gt;     year = {2023},</span></span>
<span><span class="co">#&gt;     note = {https://edonnachie.github.io/ICD10gm/, https://doi.org/10.5281/zenodo.2542833},</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ewan Donnachie.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
